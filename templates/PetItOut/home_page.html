{% extends 'PetItOut/base.html' %}
{% load static %}


{% block title_block %}
Pet It Out!!
{% endblock %}

{% block body_block %}
<script src="{% static 'javascript/battleBar.js' %}"></script>

<link rel="stylesheet" href="{% static 'css/home_page.css' %}">

    </head>

    <body>
        
        <div class = "sidebar_and_battles">

            <div class = "sidebar"></div>

            <div class = "battle_shortform">
                <div class = "pet_name_and_pic">
                    <p class = "left_name">petname1</p>

                    <div style = "text-align: center;">
                        <img src="../../static/images/dummy_cat.jpeg" class = "pet_pic" alt="Profile pic of cat">
                    </div>
                </div>      
                <div class = "battle_info">
                    <div class = "likes_texts"> 
                            
                    </div>
                    <div class="pk-detail-con">
                        <div class="progress" >
                          <div id="progress-bar" style="width: 50%;">
                          </div>
                        </div>
                        <span id="vnums-l" class="vote-nums">0</span>
                        <span id="vnums-r" class="vote-nums">0</span>
                        <button class="vote-nums vnums-b" onclick="moveBlue()">vote me!</button>
                      <button class="vote-nums vnums-red" onclick="moveRed()">vote me!</button>
                    </div>
                    <br>
                    <br>
                    
                    <br>
                    <div style = "text-align: center;">
                        <button id = "detailed_battle">See Detailed Battle</button>
                    </div>


                </div>      
                <div class = "pet_name_and_pic">
                    <p class = "right_name">petname2</p>

                    <div style="text-align: center;">
                        <img src="../../static/images/dummy_cat.jpeg" class = "pet_pic" alt="Profile pic of cat">
                    </div>
                </div>
            </div>
        </div>


        


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script>

        var x = null;
        function moveBlue(){
        if(x==null){
          var blueBar = document.getElementsByClassName("progress-bar");
          
          var parentWidth = $('.progress-bar').offsetParent().width();
          var width = $('.progress-bar').width();
          var i = Math.round(100*width/parentWidth);
              var write =  parseInt($("#vnums-l").text())+1;
              var writeString = write.toString();
                x=1;
              document.getElementById("vnums-l").innerHTML=writeString;      
              var oppo = parseInt($("#vnums-r").text());      
              var result = write/(write+oppo)*100;
              $("#progress-bar").css("width", result+"%");
              
        }
        else{
        alert("can only vote once!");
        }
        }
        function moveRed(){
        if(x==null){
          var blueBar = document.getElementsByClassName("progress-bar");
          x=1;
          var parentWidth = $('.progress-bar').offsetParent().width();
          var width = $('.progress-bar').width();
          var i = Math.round(100*width/parentWidth);
              var write =  parseInt($("#vnums-r").text())+1;
              var writeString = write.toString();
           
              document.getElementById("vnums-r").innerHTML=writeString;      
              var oppo = parseInt($("#vnums-l").text());      
              var result = oppo/(write+oppo)*100;
              $("#progress-bar").css("width", result+"%");
              
        }
        else{
        alert("can only vote once!");
        }
        }
        </script>

        <div id="details" style="display:none;">
        <style>
            .introduction{
                text-align: center;
            }

            .both_sides{
                display: grid;
                grid-template-columns: 1fr 1fr;
            }

            .left_side{
                height: auto;
                background-color: antiquewhite;
            }

            .rows_for_pet_information {
                display:grid;
                grid-template-rows: auto 20px 30px 1fr auto auto auto;
            }

            .profile_and_vote_button {
                display: grid;
                grid-template-columns: 3fr 2fr;
                place-items: center;
            }

            .profile_pic {
                height: 150px;
                width: 150px;
                border-radius: 150px;
                object-fit: cover;
                text-align: center;
            }

            .vote_button {
                background-color: red;
                height: 80%;
                width: 80%;
                padding-right: 20%;
                float: left;
            }

            .likes_and_percentages {
                text-align: right;
            }

            .percentage_bar {

            }

            .pet_info {
                display: grid;
                grid-template-rows: 50px 1fr;
            }
            .attributes {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
            }
            .bio {

            }
        </style>

    </head>

    <body>
        <div class="introduction">
            <h1>Henry vs Catherine</h1>
            <h2>Battle of the century</h2>
        </div>
        <div class="both_sides">
            <div class = "left_side">
                <div class="rows_for_pet_information">
                    <div class="profile_and_vote_button">
                        <img src="../../static/images/dummy_cat.jpeg" class = "profile_pic" alt="Picture of pet">
                        <button class = vote_button >VOTE</button>
                    </div>
                    <p class = "likes_and_percentages">
                        36/122%
                    </p>
                    <div class="percentage_bar">
                        <p>this is where percentage bar will go</p>
                    </div>
                    <div class = "attributes">
                        <p>Age:</p>
                        <p>Type:</p>
                        <p>Sex:</p>
                    </div>
                    <p class = "bio">
                        Lorem ipsum dolor sit, amet consectetur adipisicing elit. Blanditiis facere ducimus incidunt enim sint dolorem, commodi illum possimus quibusdam accusamus odio culpa eligendi in recusandae necessitatibus fugit ipsa inventore reiciendis!
                    </p>
                    <h1>Pictures of henry:</h1>
                    <div class = "gallery">
                        <img src="../../static/images/dummy_cat.jpeg" class = "gallery_pic" alt="Picture of pet">
                        <img src="../../static/images/dummy_cat.jpeg" class = "gallery_pic" alt="Picture of pet">
                        <img src="../../static/images/dummy_cat.jpeg" class = "gallery_pic" alt="Picture of pet">
                        <img src="../../static/images/dummy_cat.jpeg" class = "gallery_pic" alt="Picture of pet">
                        <img src="../../static/images/dummy_cat.jpeg" class = "gallery_pic" alt="Picture of pet">
                    </div>
                </div>
            </div>
        </div>
    </body>
        THIS IS WHERE THE SPECIFIC BATTLES GO
        </div>



        <script>

           const button = document.getElementById("detailed_battle");
            const details = document.getElementById("details");

button.addEventListener("click", () => {
  if (details.style.display === "none") {
    details.style.display = "block";
    button.innerText = "Hide Details";
  } else {
    details.style.display = "none";
    button.innerText = "See detailed battle";
  }
});
        </script>

{% endblock %}